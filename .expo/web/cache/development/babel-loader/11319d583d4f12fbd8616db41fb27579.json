{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useState } from 'react';\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport Pressable from \"react-native-web/dist/exports/Pressable\";\nimport View from \"react-native-web/dist/exports/View\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport { signUp } from \"../API/todoAPI\";\nimport { TokenContext } from \"../Context/Context\";\nimport { UsernameContext } from \"../Context/Context\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nexport default function SignUp() {\n  var _useState = useState(''),\n    _useState2 = _slicedToArray(_useState, 2),\n    login = _useState2[0],\n    setLogin = _useState2[1];\n  var _useState3 = useState(''),\n    _useState4 = _slicedToArray(_useState3, 2),\n    password = _useState4[0],\n    setPassword = _useState4[1];\n  var _useState5 = useState(''),\n    _useState6 = _slicedToArray(_useState5, 2),\n    copyPassword = _useState6[0],\n    setCopyPassword = _useState6[1];\n  var _useState7 = useState(''),\n    _useState8 = _slicedToArray(_useState7, 2),\n    error = _useState8[0],\n    setError = _useState8[1];\n  var _useState9 = useState(true),\n    _useState10 = _slicedToArray(_useState9, 2),\n    visible = _useState10[0],\n    setVisible = _useState10[1];\n  var getSignedUp = function getSignedUp(setToken, setUsername) {\n    setError('');\n    if (login == '' || password == '' || copyPassword == '') return;\n    if (password != copyPassword) {\n      setError(\"Passwords don't match\");\n      return;\n    }\n    setVisible(false);\n    signUp(login, password).then(function (token) {\n      setUsername(login);\n      setToken(token);\n      console.log('token', token);\n    }).catch(function (err) {\n      setError(err.message);\n    });\n    setVisible(true);\n  };\n  return _jsx(TokenContext.Consumer, {\n    children: function children(_ref) {\n      var _ref2 = _slicedToArray(_ref, 2),\n        token = _ref2[0],\n        setToken = _ref2[1];\n      return _jsx(UsernameContext.Consumer, {\n        children: function children(_ref3) {\n          var _ref4 = _slicedToArray(_ref3, 2),\n            username = _ref4[0],\n            setUsername = _ref4[1];\n          return _jsx(View, {\n            children: visible ? _jsxs(_Fragment, {\n              children: [_jsxs(View, {\n                style: {\n                  flexDirection: 'row'\n                },\n                children: [_jsx(Text, {\n                  style: styles.label,\n                  children: \"Login\"\n                }), _jsx(TextInput, {\n                  style: styles.text_input,\n                  onChangeText: setLogin,\n                  onSubmitEditing: function onSubmitEditing() {\n                    return getSignedUp(setToken, setUsername);\n                  },\n                  value: login\n                })]\n              }), _jsxs(View, {\n                style: {\n                  flexDirection: 'row'\n                },\n                children: [_jsx(Text, {\n                  style: styles.label,\n                  children: \"Mot de passe\"\n                }), _jsx(TextInput, {\n                  style: styles.text_input,\n                  onChangeText: setPassword,\n                  secureTextEntry: true,\n                  onSubmitEditing: function onSubmitEditing() {\n                    return getSignedUp(setToken, setUsername);\n                  },\n                  value: password\n                })]\n              }), _jsxs(View, {\n                style: {\n                  flexDirection: 'row'\n                },\n                children: [_jsx(Text, {\n                  style: styles.label,\n                  children: \"Confirmez votre mot de passe\"\n                }), _jsx(TextInput, {\n                  style: styles.text_input,\n                  onChangeText: setCopyPassword,\n                  secureTextEntry: true,\n                  onSubmitEditing: function onSubmitEditing() {\n                    return getSignedUp(setToken, setUsername);\n                  },\n                  value: copyPassword\n                })]\n              }), _jsx(Pressable, {\n                style: styles.pressable,\n                onPress: function onPress() {\n                  return getSignedUp(setToken, setUsername);\n                }\n                ,\n                children: _jsx(Text, {\n                  style: styles.label,\n                  children: \"S'inscrire\"\n                })\n              }), error ? _jsx(Text, {\n                style: styles.text_error,\n                children: error\n              }) : []]\n            }) : _jsx(ActivityIndicator, {})\n          });\n        }\n      });\n    }\n  });\n}\nvar styles = StyleSheet.create({\n  label: {\n    width: 70,\n    color: '#D6D5A8'\n  },\n  text_error: {\n    color: 'red'\n  },\n  text: {\n    color: '#D6D5A8'\n  },\n  text_input: {\n    backgroundColor: '#D6D5A8',\n    color: '#1B2430',\n    margin: 5\n  },\n  pressable: {\n    backgroundColor: '#51557E',\n    color: 'white',\n    alignItems: 'center',\n    justifyContent: 'center'\n  }\n});","map":{"version":3,"names":["React","useState","signUp","TokenContext","UsernameContext","SignUp","login","setLogin","password","setPassword","copyPassword","setCopyPassword","error","setError","visible","setVisible","getSignedUp","setToken","setUsername","then","token","console","log","catch","err","message","username","flexDirection","styles","label","text_input","pressable","text_error","StyleSheet","create","width","color","text","backgroundColor","margin","alignItems","justifyContent"],"sources":["C:/Users/Miste/OneDrive/Documents/Travail/Master/M2/IHM - Visu Donnees/ihm-visu-donnees/components/SignUp.js"],"sourcesContent":["import React, { useState } from 'react'\r\nimport {\r\n  Text,\r\n  TextInput,\r\n  Pressable,\r\n  View,\r\n  ActivityIndicator,\r\n  StyleSheet\r\n} from 'react-native'\r\n\r\nimport { signUp } from '../API/todoAPI'\r\n\r\nimport { TokenContext } from '../Context/Context'\r\nimport { UsernameContext } from '../Context/Context'\r\n\r\nexport default function SignUp () {\r\n  const [login, setLogin] = useState('')\r\n  const [password, setPassword] = useState('')\r\n  const [copyPassword, setCopyPassword] = useState('')\r\n  const [error, setError] = useState('')\r\n  const [visible, setVisible] = useState(true)\r\n\r\n  const getSignedUp = (setToken, setUsername) => {\r\n    setError('')\r\n    if (login == '' || password == '' || copyPassword == '') return\r\n    if (password != copyPassword){\r\n        setError(\"Passwords don't match\")\r\n        return\r\n    } \r\n    setVisible(false)\r\n    signUp(login, password)\r\n      .then(token => {\r\n        setUsername(login)\r\n        setToken(token)\r\n        console.log('token', token)\r\n      })\r\n      .catch(err => {\r\n        setError(err.message)\r\n      })\r\n    setVisible(true)\r\n  }\r\n\r\n  return (\r\n    <TokenContext.Consumer>\r\n      {([token, setToken]) => (\r\n        <UsernameContext.Consumer>\r\n          {([username, setUsername]) => {\r\n            return (\r\n              <View>\r\n                {visible ? (\r\n                  <>\r\n                    <View style={{ flexDirection: 'row' }}>\r\n                      <Text style={styles.label}>Login</Text>\r\n                      <TextInput\r\n                        style={styles.text_input}\r\n                        onChangeText={setLogin}\r\n                        onSubmitEditing={() =>\r\n                          getSignedUp(setToken, setUsername)\r\n                        }\r\n                        value={login}\r\n                      />\r\n                    </View>\r\n                    <View style={{ flexDirection: 'row' }}>\r\n                      <Text style={styles.label}>Mot de passe</Text>\r\n                      <TextInput\r\n                        style={styles.text_input}\r\n                        onChangeText={setPassword}\r\n                        secureTextEntry={true}\r\n                        onSubmitEditing={() =>\r\n                          getSignedUp(setToken, setUsername)\r\n                        }\r\n                        value={password}\r\n                      />\r\n                    </View>\r\n                    <View style={{ flexDirection: 'row' }}>\r\n                      <Text style={styles.label}>Confirmez votre mot de passe</Text>\r\n                      <TextInput\r\n                        style={styles.text_input}\r\n                        onChangeText={setCopyPassword}\r\n                        secureTextEntry={true}\r\n                        onSubmitEditing={() =>\r\n                          getSignedUp(setToken, setUsername)\r\n                        }\r\n                        value={copyPassword}\r\n                      />\r\n                    </View>\r\n                    <Pressable\r\n                      style={styles.pressable}\r\n                      onPress={() => getSignedUp(setToken, setUsername)}\r\n                      //title='Sign Up'\r\n                    >\r\n                    <Text style={styles.label}>S'inscrire</Text>\r\n                    </Pressable>\r\n                    {error ? (\r\n                      <Text style={styles.text_error}>{error}</Text>\r\n                    ) : (\r\n                      []\r\n                    )}\r\n                  </>\r\n                ) : (\r\n                  <ActivityIndicator />\r\n                )}\r\n              </View>\r\n            )\r\n          }}\r\n        </UsernameContext.Consumer>\r\n      )}\r\n    </TokenContext.Consumer>\r\n  )\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  label: {\r\n    width: 70,\r\n    color: '#D6D5A8'\r\n  },\r\n  text_error: {\r\n    color: 'red'\r\n  },\r\n  text : {\r\n    color: '#D6D5A8'\r\n  },\r\n  text_input: {\r\n    //borderWidth: 1,\r\n    backgroundColor: '#D6D5A8',\r\n    color: '#1B2430',\r\n    margin: 5\r\n  },\r\n  pressable: {\r\n    backgroundColor: '#51557E',\r\n    color: 'white',\r\n    alignItems: 'center',\r\n    justifyContent: 'center'\r\n  }\r\n})\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}